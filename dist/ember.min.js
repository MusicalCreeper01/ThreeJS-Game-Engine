function Ember(a,c){if(void 0==THREE)return console.error("Three.js isn't loaded!"),{};82>THREE.REVISION&&console.warn("Ember is tested with Three.js version >82, you are using "+THREE.REVISION+". Things may break if there have been API changes, please be careful!");var b=this;this.element=a;this.name="My New Ember Game";if(void 0!=c&&c.save)for(var d in c)this[d]=c[d];this["super"]=function(){};this.scenes=[];this.scene={};this.SceneManager=new function(){this.load=function(a){void 0==b.three?console.error("Three.js is not initialized, call Ember.begin() before loading scenes"):
isNaN(a)?b.scenes.forEach(function(f){f.name==a&&this._load(b.scenes[f])}):this._load(b.scenes[a])};this._load=function(a){void 0!=b.scene&&void 0!=b.scene.Events&&(b.scene.Events.ObjectAdded=[]);b.scene=a;if(2<b.three.scene.children.length){console.log("Clearing previous scene");for(var c=b.three.scene.children.length;2<=c;c--)void 0!=b.three.scene.children[c]&&b.three.scene.remove(b.three.scene.children[c])}if(void 0!=a.objects)for(console.log("Adding "+a.objects.length+" objects from new scene"),
c=0;c<a.objects.length;++c)console.log(a.objects[c]._tmesh()),b.three.scene.add(a.objects[c]._tmesh());b.scene.Events.ObjectAdded.push(function(a){b.three.scene.add(a._tmesh())})};this.add=function(a){b.scenes.push(a)}};this.begin=function(){function a(){requestAnimationFrame(a);g.updateProjectionMatrix();e.setViewport(0,0,c,d);e.render(h,g)}b.three={};var c=b.element.offsetWidth,d=b.element.offsetHeight;void 0!=c&&0!=c&&void 0!=d&&0!=d||console.error("Width/Height of the game element is 0! ");console.log(c+
"/"+d);var h=new THREE.Scene;b.three.scene=h;var g=new THREE.PerspectiveCamera(75,c/d,.1,1E3);g.position.z=5;h.add(g);var k=new THREE.AmbientLight(1092);console.log(k);h.add(k);var e=new THREE.WebGLRenderer({antialias:!0});e.setPixelRatio(c/d);e.setSize(c,d);b.element.appendChild(e.domElement);e.domElement.style.width="100%";e.domElement.style.height="100%";b.three.renderer=e;b.renderer={camera:g,ambient:k,WebGLRenderer:e};a()};this.save=function(){this.save=!0;return JSON.stringify(this)};this.load=
function(a){a=JSON.parse(a);for(var b in a)this[b]=a[b]}}Ember.quaternions=!1;Ember.Color=function(a,c,b,d){this.r=255;this.g=86;this.b=0;this.a=1;this.Events={};this.Events.OnChange=[];this.set=function(a,b,c,d){var f=this;void 0!=a&&void 0!=b&&void 0!=c&&void 0!=d?(this.r=a,this.g=b,this.b=c,this.a=d):void 0!=a&&void 0!=b&&void 0!=c?(this.r=a,this.g=b,this.b=c):void 0!=a&&(void 0!=Ember.Util.Color?(a=Ember.Util.Color.fromHex(a),this.r=a.r,this.g=a.g,this.b=a.b):console.error("Hex input to the Ember.Color constructor is currently not supported due to the color utilities modules not being included"));
this.Events.OnChange.forEach(function(a){return a(f)})};void 0!=a&&void 0!=c&&void 0!=b&&void 0!=d?(this.r=a,this.g=c,this.b=b,this.a=d):void 0!=a&&void 0!=c&&void 0!=b?(this.r=a,this.g=c,this.b=b):void 0!=a&&(void 0!=Ember.Util.Color?(a=Ember.Util.Color.fromHex(a),this.r=a.r,this.g=a.g,this.b=a.b):console.error("Hex input to the Ember.Color constructor is currently not supported due to the color utilities modules not being included"));this.toHex=function(){if(void 0!=Ember.Util.Color)return Ember.Util.Color.toHex(this.r,
this.g,this.b);console.error("Hex output from Ember.Color is currently not supported due to the color utilities modules not being included")}};Ember.GameObject=function(){var a=this;this.name="New GameObject";this.layer=0;this.tags=[];this.active=!0;this.mesh={};this.material={};this.scripts=[];this._tmesh=function(){if(a.material instanceof Ember.Material)return new THREE.Mesh(a.mesh,a.material._tmat());if(a.material instanceof THREE.Material)return new THREE.Mesh(a.mesh,a.material)};this.position=new Ember.Vector3;this.rotation=Ember.quaternions?new Ember.Vector3:new THREE.Quaternion;this.scale=new Ember.Vector3};
Ember.GameObject.Box=function(a,c,b){var d=new Ember.GameObject;d.mesh=void 0!=a&&void 0!=c&&void 0!=b?new THREE.BoxGeometry(a,c,b):void 0!=a?new THREE.BoxGeometry(a,a,a):new THREE.BoxGeometry(1,1,1);d.material=new THREE.MeshPhongMaterial;return d};Ember.Material=function(){var a=this;this.name="New Scene";this.shader=void 0;this.Events={};this.Events.OnChange=[];this.setShader=function(c){this.shader=c;this.Events.OnChange.forEach(function(b){void 0!=a._t&&a._tmat();b(a)})};this.texture=null;this.setTexture=function(c){this.texture=c;this.Events.OnChange.forEach(function(b){void 0!=a._t&&void 0!=a._t.map&&(a._t.map=c);b(a)})};this.color=new Ember.Color(255,255,255);this.setColor=function(c){c instanceof Ember.Color?(this.color=c,void 0!=a._t&&
(console.log("mat exists.."),void 0!=a._t.color&&(console.log("color exists.."),a._t.color.setRGB(c.r,c.g,c.b))),this.Events.OnChange.forEach(function(b){b(a)})):console.error("Passed wrong instance type to Ember.Material.color")};this.renderside=THREE.FrontSide;this.setRenderside=function(c){this.renderside=c;this.Events.OnChange.forEach(function(b){void 0!=a._t&&void 0!=a._t.side&&(a._t.side=a.renderside);b(a)})};this.override=void 0;this.setOverride=function(c){this.override=c;this.Events.OnChange.forEach(function(b){void 0!=
a._t&&a._tmat();b(a)})};this._tmat=function(){if(void 0!=a.override)return a.override;a._t=void 0!=a.shader?new THREE.ShaderMaterial({fragmentShader:a.shader.fragmentShader,vertexShader:a.shader.vertexShader,uniforms:a.shader.uniforms,depthWrite:!1,side:a.renderside}):new THREE.MeshBasicMaterial({color:a.color.toHex(),map:a.texture});return a._t}};
Ember.Material.Skybox=function(a,c){var b=new Ember.Material;b.name="Sky";var d=THREE.ImageUtils.loadTextureCube(a,void 0,function(){b.texture=d;var a=THREE.ShaderLib.cube;THREE.UniformsUtils.clone(a.uniforms);a.uniforms.tCube.value=d;b.shader=a;b.renderSide=THREE.BackSide;null!=c&&c(b)});return b};
Ember.Material.LoadRemote=function(a,c){var b={loaded:!1,progress:0,error:!1,material:d},d=new Ember.Material;d.name="Loaded Material";THREE.MaterialLoader.load(a,function(a){b.loaded=!0;d.override=a;void 0!=c&&c(d)},function(a){b.progress=a.loaded/a.total*100;console.log(a.loaded/a.total*100+"% loaded")},function(){b.error=!0});return b};Ember.Scene=function(){this.name="New Scene";this.objects=[];this.enviroment=new function(){this.ambientColor=3549;this.background={type:1,color:963304,skybox:new Ember.Material.Skybox("img/sky/posx.jpg img/sky/negx.jpg img/sky/posy.jpg img/sky/negy.jpg img/sky/posz.jpg img/sky/negz.jpg".split(" "))}};this.Events={};this.Events.ObjectAdded=[];this.add=function(a){this.objects.push(a);this.Events.ObjectAdded.forEach(function(c){c(a)})}};Ember.Vector3=function(a,c,b){this.z=this.y=this.x=0;void 0!=a&&void 0!=c&&void 0!=b?(this.x=a,this.y=c,this.z=b):void 0!=a&&(this.z=this.y=this.x=a);this.set=function(a,b,c){void 0!=a&&void 0!=b&&void 0!=c&&(this.x=a,this.y=b,this.z=c);return this}};Ember.Util={};Ember.Util.Color={fromHex:function(a){return hexToRgb(a)},toHex:function(a,c,b){return rgbToHex(a,c,b)}};function componentToHex(a){a=a.toString(16);return 1==a.length?"0"+a:a}function rgbToHex(a,c,b){return"#"+componentToHex(a)+componentToHex(c)+componentToHex(b)}
function hexToRgb(a){a=a.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(a,b,d,f){return b+b+d+d+f+f});return(a=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(a))?{r:parseInt(a[1],16),g:parseInt(a[2],16),b:parseInt(a[3],16)}:null};
